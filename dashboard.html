<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In - OZMCP</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --bg: #060606;
      --line: #2a261d;
      --text: #f5f5f5;
      --muted: #a49b84;
      --btn: #11150f;
      --hover: #1b2218;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: "Manrope", "Space Grotesk", system-ui, sans-serif;
      min-height: 100vh;
      background-image:
        radial-gradient(700px 300px at 50% -90px, rgba(195, 157, 78, 0.18), transparent 60%),
        linear-gradient(180deg, #070706 0%, #050505 100%);
    }
    .top-logo {
      position: fixed;
      top: 26px;
      left: 30px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      color: #ededed;
      text-decoration: none;
      letter-spacing: .02em;
      font-weight: 700;
      font-size: 1.1rem;
    }
    .top-logo .site-logo {
      width: 34px;
      height: 34px;
      object-fit: contain;
      border-radius: 8px;
      display: block;
    }
    .auth-shell {
      width: min(100%, 460px);
      margin: 84px auto 0;
      padding: 0 10px;
    }
    .auth-title {
      margin: 0;
      font-size: 2.05rem;
      line-height: 1.1;
      letter-spacing: -.02em;
    }
    .auth-subtitle {
      margin: 4px 0 16px;
      color: #9d9583;
      font-size: 1.9rem;
      line-height: 1.1;
      letter-spacing: -.02em;
    }
    .auth-btn {
      width: 100%;
      height: 46px;
      border: 1px solid #12120d;
      background: var(--btn);
      color: #f5f5f5;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 800;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-decoration: none;
      transition: background .18s ease, border-color .18s ease;
      margin-bottom: 10px;
      box-shadow: inset 0 1px 0 rgba(255, 234, 194, 0.07);
    }
    .auth-btn:hover { background: var(--hover); border-color: #7f6840; }
    .auth-btn.is-loading {
      opacity: .82;
      cursor: wait;
    }
    .auth-btn.is-loading::after {
      content: "";
      width: 14px;
      height: 14px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.25);
      border-top-color: #f5f5f5;
      animation: authSpin .7s linear infinite;
    }
    @keyframes authSpin {
      to { transform: rotate(360deg); }
    }
    .auth-label-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0 6px;
    }
    .auth-label {
      color: #868686;
      font-size: 1rem;
      font-weight: 800;
    }
    .auth-link {
      color: #cfcfcf;
      text-decoration: none;
      font-size: .95rem;
      font-weight: 700;
    }
    .auth-link:hover { color: #ffffff; }
    .auth-input {
      width: 100%;
      height: 46px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: #0b0b09;
      color: #fafafa;
      font-size: 1rem;
      padding: 0 14px;
      outline: none;
      margin-bottom: 10px;
    }
    .auth-input::placeholder { color: #6b6b6b; }
    .auth-input:focus { border-color: #656047; }
    .auth-center-link {
      margin-top: 12px;
      display: block;
      text-align: center;
      color: #c5c5c5;
      text-decoration: none;
      font-size: .95rem;
      font-weight: 700;
    }
    .auth-message {
      min-height: 24px;
      margin-top: 10px;
      color: #f2cc6c;
      font-size: .9rem;
      font-weight: 700;
    }
    .auth-note {
      margin: 0 0 10px;
      color: #8e8778;
      font-size: .9rem;
      font-weight: 700;
    }
    .verify-wrap {
      margin-top: 4px;
      border: 1px solid #3b3223;
      background:
        radial-gradient(220px 120px at 50% -18px, rgba(191, 148, 67, 0.12), transparent 70%),
        linear-gradient(180deg, #0e0f12 0%, #090909 100%);
      border-radius: 16px;
      padding: 18px 16px 14px;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.5);
      max-width: 440px;
      margin-left: auto;
      margin-right: auto;
    }
    .verify-badge {
      width: 62px;
      height: 62px;
      border-radius: 50%;
      margin: 0 auto 14px;
      background: radial-gradient(circle at 40% 30%, #f2cc6c 0%, #b88934 55%, #7b5824 100%);
      display: grid;
      place-items: center;
      color: #1a1206;
      font-size: 1.5rem;
      box-shadow: 0 0 0 10px rgba(212, 168, 47, 0.12);
    }
    .verify-title {
      margin: 0;
      text-align: center;
      font-size: 1.15rem;
      letter-spacing: -.02em;
      color: #f4f7ff;
      font-weight: 800;
    }
    .verify-sub {
      margin: 6px 0 12px;
      text-align: center;
      color: #c6bca7;
      font-size: .94rem;
      font-weight: 600;
      line-height: 1.4;
    }
    .verify-sub strong { color: #f3e5c6; letter-spacing: .06em; }
    .verify-code-input {
      position: absolute;
      pointer-events: none;
      opacity: 0;
      width: 0;
      height: 0;
    }
    .verify-otp-grid {
      display: grid;
      grid-template-columns: repeat(8, 44px);
      gap: 6px;
      justify-content: center;
      margin-bottom: 12px;
    }
    .verify-otp-digit {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      border: 1px solid #4a3a25;
      background: rgba(16, 13, 8, 0.92);
      color: #f5f0e3;
      font-size: 1.28rem;
      font-weight: 800;
      text-align: center;
      padding: 0;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
    }
    .verify-otp-digit:focus {
      border-color: #d4a84a;
      box-shadow: 0 0 0 3px rgba(212, 168, 74, 0.22);
      background: rgba(31, 24, 14, 0.95);
    }
    .verify-resend-text {
      margin: 0 0 10px;
      text-align: center;
      color: #d2c8b0;
      font-size: .9rem;
      font-weight: 600;
    }
    .verify-resend-link {
      background: none;
      border: none;
      color: #f0d28b;
      text-decoration: underline;
      font-weight: 800;
      cursor: pointer;
      padding: 0;
      font-size: inherit;
    }
    .verify-resend-link[disabled] {
      opacity: .5;
      cursor: not-allowed;
      text-decoration: none;
    }
    .verify-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    .verify-btn {
      height: 42px;
      border-radius: 10px;
      font-size: .95rem;
      font-weight: 800;
      border: 1px solid transparent;
      cursor: pointer;
    }
    .verify-btn.secondary {
      border-color: #3e3425;
      color: #f4efe3;
      background: rgba(24, 20, 13, 0.8);
    }
    .verify-btn.primary {
      border-color: #8c6a33;
      color: #ffffff;
      background: linear-gradient(180deg, #a77f3f 0%, #7b5b2c 100%);
    }
    .verify-btn.primary.is-loading::after {
      content: "";
      width: 14px;
      height: 14px;
      margin-left: 8px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.28);
      border-top-color: #fff;
      animation: authSpin .7s linear infinite;
      display: inline-block;
      vertical-align: middle;
    }
    .auth-footer {
      margin-top: 44px;
      text-align: center;
      color: #7f7969;
      font-size: .85rem;
      font-weight: 700;
    }
    .auth-step { display: none; }
    .auth-step.active { display: block; }
    @media (max-width: 800px) {
      .top-logo { top: 16px; left: 16px; font-size: 1.1rem; }
      .auth-shell { margin-top: 70px; }
      .auth-title { font-size: 1.72rem; }
      .auth-subtitle { font-size: 1.58rem; }
      .verify-wrap {
        max-width: 100%;
        padding: 16px 12px 12px;
      }
      .verify-otp-grid {
        grid-template-columns: repeat(8, 36px);
        gap: 4px;
      }
      .verify-otp-digit {
        width: 36px;
        height: 36px;
        font-size: 1.02rem;
        border-radius: 8px;
      }
    }
  </style>
</head>
<body>
  <a class="top-logo" href="/">
    <img src="assets/logo.png" alt="OZMCP logo" class="site-logo">
    <span>OZMCP</span>
  </a>

  <main class="auth-shell">
    <h1 class="auth-title">Welcome to OZMCP</h1>
    <p class="auth-subtitle">The smarter way to run MCP workflows</p>

    <section id="authStepEmail" class="auth-step active">
      <button id="oauthGoogle" class="auth-btn" type="button"><i class="fa-brands fa-google"></i> Continue with Google</button>
      <button id="oauthGithub" class="auth-btn" type="button"><i class="fa-brands fa-github"></i> Continue with GitHub</button>
      <button id="oauthApple" class="auth-btn" type="button"><i class="fa-brands fa-apple"></i> Continue with Apple</button>
      <div class="auth-label-row">
        <label for="dashboardEmail" class="auth-label">Email</label>
      </div>
      <input id="dashboardEmail" class="auth-input" type="email" placeholder="Your email address" autocomplete="email">
      <button id="continueToPassword" class="auth-btn" type="button">Continue</button>
      <a id="toggleSignMode" class="auth-center-link" href="javascript:void(0)">Don't have an account? Sign up</a>
      <div id="authMessage" class="auth-message"></div>
    </section>

    <section id="authStepPassword" class="auth-step">
      <button id="emailCodeSignIn" class="auth-btn" type="button"><i class="fa-regular fa-envelope"></i> Email sign-in code</button>
      <div class="auth-label-row">
        <label for="dashboardEmailConfirm" class="auth-label">Email</label>
      </div>
      <input id="dashboardEmailConfirm" class="auth-input" type="email" readonly>
      <div class="auth-label-row">
        <label for="dashboardPassword" class="auth-label">Password</label>
        <a id="forgotPasswordLink" class="auth-link" href="javascript:void(0)">Forgot your password?</a>
      </div>
      <input id="dashboardPassword" class="auth-input" type="password" placeholder="Your password" autocomplete="current-password">
      <button id="passwordSubmit" class="auth-btn" type="button">Sign in</button>
      <a id="backToEmail" class="auth-center-link" href="javascript:void(0)"><i class="fa-solid fa-angle-left"></i> Go back</a>
      <div id="authMessageStep2" class="auth-message"></div>
    </section>

    <section id="authStepVerify" class="auth-step">
      <div class="verify-wrap">
        <div class="verify-badge"><i class="fa-solid fa-envelope-circle-check"></i></div>
        <h2 class="verify-title">Verification Code</h2>
        <p class="verify-sub">Verification code sent to <strong id="verifyMaskedEmail">*****</strong>.</p>
        <input id="verifyEmail" class="auth-input verify-code-input" type="email" readonly>
        <input id="verifyCode" class="auth-input verify-code-input" type="text" inputmode="numeric" autocomplete="one-time-code">
        <div class="verify-otp-grid" id="verifyOtpGrid">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="0" aria-label="Code digit 1">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="1" aria-label="Code digit 2">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="2" aria-label="Code digit 3">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="3" aria-label="Code digit 4">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="4" aria-label="Code digit 5">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="5" aria-label="Code digit 6">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="6" aria-label="Code digit 7">
          <input class="verify-otp-digit" type="text" inputmode="numeric" maxlength="1" data-otp-index="7" aria-label="Code digit 8">
        </div>
        <p class="verify-resend-text">Code not received?
          <button id="resendVerifyCode" class="verify-resend-link" type="button">Resend</button>
        </p>
        <div class="verify-actions">
          <button id="backToPasswordFromVerify" class="verify-btn secondary" type="button">Go Back</button>
          <button id="verifyCodeSubmit" class="verify-btn primary" type="button">Verify</button>
        </div>
        <div id="authMessageStep3" class="auth-message"></div>
      </div>
    </section>

    <section id="dashboardUserView" style="display:none;">
      <div class="auth-label-row">
        <div class="auth-label">Signed in as <span id="dashboardUserEmail"></span></div>
      </div>
      <button id="authSignOut" class="auth-btn" type="button">Sign Out</button>
      <a class="auth-center-link" href="/">Back to home</a>
    </section>

    <div class="auth-footer">Terms of Service and Privacy Policy</div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="auth.js?v=20260301-6"></script>
</body>
</html>

